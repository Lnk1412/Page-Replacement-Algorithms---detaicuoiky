#include <iostream>
#include <vector>
using namespace std;

int main() {
    int capacity;                  
    cout << "Nhap so khung trang: ";
    cin >> capacity;

    string ref;                    
    cout << "Nhap chuoi tham chieu: ";
    cin >> ref;

    vector<int> frames;            
    int page_faults = 0;           
    int index_to_replace = 0;      

    cout << "\nQua trinh thay the trang (FIFO):\n";

    for (char c : ref) {
        int page = c - '0';        
        bool hit = false;

        for (int x : frames) {
            if (x == page) {
                hit = true;
                break;
            }
        }

        if (!hit) { // neu chua co (page fault)
            if ((int)frames.size() < capacity) {
                frames.push_back(page); 
            } else {
                // thay the theo FIFO
                frames[index_to_replace] = page;
                index_to_replace = (index_to_replace + 1) % capacity;
            }
            page_faults++;
        }

        cout << "Trang " << page << " -> [ ";
        for (int x : frames) cout << x << " ";
        cout << "]" << (hit ? " (hit)" : " (loi trang)") << "\n";
    }

    cout << "\nTong so loi trang = " << page_faults << endl;
    return 0;
}
